#!/bin/bash

# Paso 1: Leer la variable GITHUB_USER
GITHUB_USER=$GITHUB_USER

# Paso 2: Consultar la URL de la API de GitHub
API_URL="https://api.github.com/users/$GITHUB_USER"
USER_DATA=$(curl -s $API_URL)

# Paso 3: Extraer la información del usuario
NAME=$(echo $USER_DATA | jq -r '.name')
ID=$(echo $USER_DATA | jq -r '.id')
CREATED_AT=$(echo $USER_DATA | jq -r '.created_at')

# Paso 4: Crear un mensaje y guardarlo en un archivo de registro
MESSAGE="Nombre: $NAME\nID: $ID\nFecha de creación: $CREATED_AT"
LOG_DIR="/tmp/$(date +\%Y-\%m-\%d)"
LOG_FILE="$LOG_DIR/saludos.log"

mkdir -p $LOG_DIR
echo -e $MESSAGE > $LOG_FILE

# Paso 5: Agregar el script al cronjob
(crontab -l ; echo "*/5 * * * * /ruta/al/script.sh") | crontab -


